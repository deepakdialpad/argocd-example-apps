#
# baresip configuration
#

#------------------------------------------------------------------------------

# Core
poll_method		epoll		# poll, select, epoll ..

# SIP
sip_trans_bsize		128
sip_listen		0.0.0.0:SIPPORT
#sip_certificate	cert.pem

# Call
call_local_timeout	120
call_max_calls	4

# Audio
#audio_path		/usr/share/baresip
audio_player	pulse,MicOutput
audio_source	pulse,DefaultOutput.monitor
audio_alert		pulse,null
audio_srate		8000-48000
audio_channels		1-2
#ausrc_srate		48000
#auplay_srate		48000
#ausrc_channels		0
#auplay_channels		0
audio_level		no

# Video
video_source		x11grab,DISPLAY
video_display		gst_v4l2_sink,VIDEODEV
video_size		1280x720
video_bitrate		2500000
video_fps		30
video_fullscreen		no

#video_content_source            ""
video_content_display           gst_v4l2_sink,CONTENTDEV
video_content_size              1280x720
video_content_bitrate           2500000
video_content_fps               30
video_content_fullscreen        no


# AVT - Audio/Video Transport
rtp_tos			184
rtp_ports		20000-20500
rtp_bandwidth	1024-2560 # [kbit/s]
rtcp_enable		yes
rtcp_mux		no
jitter_buffer_delay	1-5		# frames
rtp_stats		no
rtp_timeout		2400

# Network
#dns_server		10.0.0.1:53
#net_interface		eth0

# BFCP
bfcp_proto		udp
bfcp_port		BFCPPORT

#------------------------------------------------------------------------------
# Modules

module_path		/usr/lib/baresip/modules

# UI Modules
module			stdio.so
#module			cons.so
#module			evdev.so
#module			httpd.so

# Audio codec Modules (in order)
module			opus.so
#module			silk.so
#module			amr.so
module			g7221.so
module			g722.so
#module			g726.so
module			g711.so
#module			gsm.so
#module			l16.so
#module			speex.so
#module			bv32.so
#module			mpa.so
#module			codec2.so
#module			ilbc.so
#module			isac.so

# Audio filter Modules (in encoding order)
module			vumeter.so
#module			sndfile.so
#module			speex_aec.so
#module			speex_pp.so
#module			plc.so

# Audio driver Modules
#module			alsa.so
module			pulse.so
#module			jack.so
#module			portaudio.so
#module			aubridge.so
#module			aufile.so

# Video codec Modules (in order)
module			avcodec.so
#module			vp8.so
#module			vp9.so
#module			h265.so

# Video filter Modules (in encoding order)
#module			selfview.so
#module			snapshot.so
module			swscale.so
#module			vidinfo.so

# Video source modules
#module			v4l.so
#module			v4l2.so
#module			v4l2_codec.so
module			avformat.so
module			x11grab.so
#module			cairo.so
#module			vidbridge.so

# Video display modules
#module			directfb.so
#module			x11.so
#module			sdl2.so
#module			fakevideo.so
module			gst_v4l2_sink.so

# Audio/Video source modules
#module			rst.so
#module			gst1.so
#module			gst_video1.so

# Media NAT modules
module			stun.so
module			turn.so
module			ice.so
#module			natpmp.so

# Media encryption modules
module			srtp.so
module			dtls_srtp.so
#module			zrtp.so


#------------------------------------------------------------------------------
# Temporary Modules (loaded then unloaded)

module_tmp		uuid.so
module_tmp		account.so


#------------------------------------------------------------------------------
# Application Modules

module_app		auloop.so
module_app		contact.so
module_app		debug_cmd.so
module_app		dtmfio.so
#module_app		echo.so
#module_app			gtk.so
module_app		menu.so
#module_app		mwi.so
#module_app		natbd.so
#module_app		presence.so
#module_app		syslog.so
module_app		vidloop.so
module_app		mqtt.so


#------------------------------------------------------------------------------
# Module parameters


cons_listen		0.0.0.0:5555

#http_listen		127.0.0.1:HTTPD_PORT
mqtt_broker_port	MQTTPORT

evdev_device		/dev/input/event0

# Speex codec parameters
speex_quality		7 # 0-10
speex_complexity	7 # 0-10
speex_enhancement	0 # 0-1
speex_mode_nb		3 # 1-6
speex_mode_wb		6 # 1-6
speex_vbr		0 # Variable Bit Rate 0-1
speex_vad		0 # Voice Activity Detection 0-1
speex_agc_level		8000

# Opus codec parameters
opus_bitrate		40000 # 6000-510000
opus_stereo			no
opus_sprop_stereo	no
opus_cbr			1
opus_inbandfec		1
opus_usedtx			1

# Selfview
video_selfview		window # {window,pip}
#selfview_size		64x64

# ICE
ice_turn		no
ice_debug		yes
ice_nomination		regular	# {regular,aggressive}
ice_mode		full	# {full,lite}

# Menu
#redial_attempts		3 # Num or <inf>
#redial_delay		5 # Delay in seconds

